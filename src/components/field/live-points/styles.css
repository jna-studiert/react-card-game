:root {
    --primary-color: 249, 115, 22;
    --light-color: 255, 205, 40;
    --dark-color: 194, 65, 12;
}

.crystal-container {
    width: 25px;
    height: 27px;
    position: relative;
}

.polygon {
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
}

.empty-slot {
    width: 100%;
    height: 100%;
    position: absolute;
    background: linear-gradient(
        45deg,
        #2b2b2b 0%,
        #3a3a3a 30%,
        #1a1a1a 70%,
        #000000 100%
    );
    box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.7),
        inset 0 -2px 4px rgba(255, 255, 255, 0.05);
}

.crystal {
    width: 100%;
    height: 100%;
    position: relative;
    background: linear-gradient(
        45deg,
        rgb(var(--primary-color)) 0%,
        rgb(var(--dark-color)) 30%,
        rgb(var(--light-color)) 70%,
        rgb(var(--primary-color)) 100%
    );
    animation: crystal-glow 2s ease-in-out infinite alternate;
}

.glow {
    filter: drop-shadow(0 0 6px rgba(var(--light-color), 0.7))
        drop-shadow(0 0 12px rgba(var(--primary-color), 0.6))
        drop-shadow(0 0 22px rgba(var(--dark-color), 0.5));

    animation: glow-pulse 2.4s ease-in-out infinite alternate;
    transition: filter 0.25s ease;
}

.glow:hover {
    filter: drop-shadow(0 0 10px rgba(var(--light-color), 0.95))
        drop-shadow(0 0 20px rgba(var(--primary-color), 0.9))
        drop-shadow(0 0 35px rgba(var(--dark-color), 0.75));
}

@keyframes glow-pulse {
    0% {
        filter: drop-shadow(0 0 5px rgba(var(--light-color), 0.6))
            drop-shadow(0 0 10px rgba(var(--primary-color), 0.5))
            drop-shadow(0 0 18px rgba(var(--dark-color), 0.45));
    }
    100% {
        filter: drop-shadow(0 0 7px rgba(var(--light-color), 0.8))
            drop-shadow(0 0 15px rgba(var(--primary-color), 0.7))
            drop-shadow(0 0 26px rgba(var(--dark-color), 0.55));
    }
}

.glow.glow-pop {
    animation: glow-pop-flash 300ms ease-out;
}

@keyframes glow-pop-flash {
    0% {
        filter: drop-shadow(0 0 8px rgba(var(--light-color), 0.9))
            drop-shadow(0 0 16px rgba(var(--primary-color), 0.8))
            drop-shadow(0 0 28px rgba(var(--dark-color), 0.7));
        transform: scale(1);
    }
    40% {
        filter: drop-shadow(0 0 16px rgba(var(--light-color), 1))
            drop-shadow(0 0 32px rgba(var(--primary-color), 1))
            drop-shadow(0 0 48px rgba(var(--dark-color), 0.9));
        transform: scale(1.12);
    }
    100% {
        filter: drop-shadow(0 0 5px rgba(var(--light-color), 0.6))
            drop-shadow(0 0 10px rgba(var(--primary-color), 0.5))
            drop-shadow(0 0 18px rgba(var(--dark-color), 0.4));
        transform: scale(1);
    }
}

.crystal-shine {
    position: absolute;
    top: 15%;
    left: 15%;
    width: 40%;
    height: 25%;
    background: linear-gradient(
        45deg,
        rgba(255, 255, 255, 0.9) 0%,
        rgba(255, 255, 255, 0.2) 100%
    );
    transform: scale(0.6);
    opacity: 0.8;
    filter: blur(1px);
}

.crystal:hover {
    transform: scale(1.15) rotate(5deg);
}

@keyframes crystal-glow {
    0% {
        filter: brightness(1) hue-rotate(0deg);
    }
    100% {
        filter: brightness(1.2) hue-rotate(10deg);
    }
}

.crystal.popping {
    animation: crystal-pop 0.6s ease-in forwards;
}

@keyframes crystal-pop {
    0% {
        transform: scale(1);
        opacity: 1;
        filter: brightness(1) blur(0);
    }
    30% {
        transform: scale(1.4);
        opacity: 1;
        filter: brightness(1.5) blur(1px);
    }
    50% {
        transform: scale(1.6);
        opacity: 0.8;
        filter: brightness(2) blur(2px);
    }
    80% {
        transform: scale(1.8);
        opacity: 0.4;
        filter: brightness(3) blur(4px);
    }
    100% {
        transform: scale(2);
        opacity: 0;
        filter: brightness(4) blur(8px);
    }
}

.crystal-particle {
    position: absolute;
    width: 6px;
    height: 6px;
    background: linear-gradient(45deg, #00ffff, #0088ff);
    border-radius: 50%;
    top: 50%;
    left: 50%;
    opacity: 0;
    animation: particle-fly 0.6s ease-out forwards;
}

.particle-1 {
    animation-delay: 0.1s;
    background: #00ffff;
}

.particle-2 {
    animation-delay: 0.2s;
    background: #0088ff;
}

.particle-3 {
    animation-delay: 0.3s;
    background: #0044ff;
}

.particle-4 {
    animation-delay: 0.4s;
    background: #00aaff;
}

@keyframes particle-fly {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
    }
    20% {
        opacity: 1;
    }
    100% {
        transform: translate(
                calc(-50% + var(--tx, 0px)),
                calc(-50% + var(--ty, 0px))
            )
            scale(1);
        opacity: 0;
    }
}

.particle-1 {
    --tx: 30px;
    --ty: -20px;
}

.particle-2 {
    --tx: -25px;
    --ty: -30px;
}

.particle-3 {
    --tx: 20px;
    --ty: 35px;
}

.particle-4 {
    --tx: -35px;
    --ty: 25px;
}

.crystal.popping::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    border: 2px solid rgba(0, 255, 255, 0.8);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    animation: shockwave 0.6s ease-out forwards;
}

@keyframes shockwave {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
    }
    100% {
        transform: translate(-50%, -50%) scale(3);
        opacity: 0;
    }
}
